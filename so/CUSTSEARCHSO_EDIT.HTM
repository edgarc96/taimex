<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Search - Sales Order Entry - TAIMEX System</title>
    <link rel="stylesheet" href="styles/nbmmedit.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        .search-container {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        
        .search-form {
            display: grid;
            grid-template-columns: 1fr 1fr auto;
            gap: 16px;
            align-items: end;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
        }
        
        .form-group label {
            font-weight: 500;
            margin-bottom: 6px;
            color: #374151;
        }
        
        .form-group input {
            padding: 10px 14px;
            border: 2px solid #d1d5db;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.2s;
        }
        
        .form-group input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        .search-btn {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            height: fit-content;
        }
        
        .search-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }
        
        .results-container {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        
        .results-header {
            background: linear-gradient(135deg, #1e40af 0%, #1e3a8a 100%);
            color: white;
            padding: 16px 20px;
            font-weight: 500;
        }
        
        .customer-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .customer-table th {
            background: #f8fafc;
            padding: 12px 16px;
            text-align: left;
            font-weight: 500;
            color: #374151;
            border-bottom: 2px solid #e5e7eb;
        }
        
        .customer-table td {
            padding: 12px 16px;
            border-bottom: 1px solid #f3f4f6;
        }
        
        .customer-table tr:hover {
            background: #f9fafb;
        }
        
        .select-btn {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .select-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
        }
        
        .debug-panel {
            margin-top: 20px;
            padding: 12px 16px;
            border-radius: 10px;
            border: 1px solid rgba(59, 130, 246, 0.35);
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.08), rgba(59, 130, 246, 0.02));
            font-size: 0.85rem;
            color: #1d4ed8;
        }
        
        .no-results {
            text-align: center;
            padding: 40px;
            color: #6b7280;
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="container">
            <h1 class="system-title">TAIMEX System</h1>
        </div>
    </header>

    <main class="main-content">
        <div class="container">
            <section class="welcome-section">
                <h2 class="welcome-title">Customer Search - Sales Order Entry</h2>
                <p class="system-time" id="current-time"></p>
            </section>

            <section class="search-container">
                <form method="post" action="/GET_CUSTOMERS.XML" name="CUSTSEARCH" class="search-form">
                    <div class="form-group">
                        <label for="customer-id">Customer ID</label>
                        <input type="text" id="customer-id" name="ID" placeholder="Enter customer ID or leave blank for all">
                    </div>
                    <div class="form-group">
                        <label for="customer-name">Customer Name</label>
                        <input type="text" id="customer-name" name="NAME" placeholder="Enter customer name (optional)">
                    </div>
                    <button type="submit" class="search-btn">
                        <span>üîç Search Customers</span>
                    </button>
                </form>
            </section>

            <section class="results-container">
                <div class="results-header">
                    <h3>Customer Results</h3>
                </div>
                <div id="customer-results">
                    <div class="no-results">
                        <p>üîç Enter search criteria above to find customers</p>
                    </div>
                </div>
            </section>
            
            <div class="debug-panel" id="debugConsole" aria-live="polite">
                Customer search debug idle ‚Äì perform a search to log activity.
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <p class="footer-text">¬© 2024 TAIMEX System. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // Display current time
        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleString('en-US', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });
            document.getElementById('current-time').textContent = timeString;
        }
        
        updateTime();
        setInterval(updateTime, 1000);
        
        // Debug functionality
        (function () {
            const debugPanel = document.getElementById('debugConsole');
            const form = document.forms['CUSTSEARCH'];

            function logDebug(message, status) {
                const stamp = new Date().toLocaleTimeString();
                console.log('[CUSTSEARCH DEBUG]', message);
                if (!debugPanel) {
                    return;
                }
                if (status) {
                    debugPanel.dataset.status = status;
                } else {
                    debugPanel.removeAttribute('data-status');
                }
                debugPanel.innerHTML = `[${stamp}] ${message}`;
            }

            if (!form) {
                logDebug('CUSTSEARCH form not found in DOM.', 'error');
                return;
            }

            form.addEventListener('submit', (event) => {
                const formData = new FormData(form);
                let debugData = 'Searching with: ';
                for (let [key, value] of formData.entries()) {
                    debugData += `${key}="${value}" `;
                }
                logDebug(debugData, 'info');
                logDebug('Submitting to GET_CUSTOMERS.XML for customer data...', 'info');
            });

            logDebug('Customer search debug ready. Waiting for search submission...');
        })();
    </script>

    <!-- Server-side processing code -->
    <pre style="display:none;">PicLan-IP/BASIC ^ ^
*
    PL_GET_COOKIE INITIALS FROM 'INIT' ELSE
        ERR = '' ; INITIALS=  ''
         CALL PLW.PAGE('LOGIN.HTM','',ERR)
        RETURN
    END
*
    OPEN 'CUSTOMERS' TO CUSTOMERSF ELSE STOP 201,'CUSTOMERS'
*
    PL_GETVAR ID FROM 'ID' ELSE ID = ''
    PL_GETVAR NAME FROM 'NAME' ELSE NAME = ''
*
    ID = TRIM(ID)
    NAME = TRIM(NAME)
*
* Process search and display results
* This would typically generate the customer list HTML
*
</pre>
</body>
</html>