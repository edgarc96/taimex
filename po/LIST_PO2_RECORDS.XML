<pre>
PROGRAM LIST_PO2_RECORDS

* Initialize
XML.RESPONSE = ''
XAM = CHAR(254)

* Open databases
OPEN 'PO2' TO PO2F ELSE
    XML.RESPONSE = '<?xml version="1.0"?><error>Cannot open PO2</error>'
    GOTO FINISH
END

OPEN 'XMLDATA' TO XMLDATAF ELSE
    XML.RESPONSE = '<?xml version="1.0"?><error>Cannot open XMLDATA</error>'
    GOTO FINISH
END

* Start response
XML.RESPONSE = '<?xml version="1.0"?>'
XML.RESPONSE = XML.RESPONSE : XAM : '<result>'

* Test PO 96450
READ PO.RECORD FROM PO2F, '96450' ELSE
    XML.RESPONSE = XML.RESPONSE : XAM : '<po96450>NOT_FOUND</po96450>'
    GOTO CHECK_DB
END

XML.RESPONSE = XML.RESPONSE : XAM : '<po96450>FOUND</po96450>'

CHECK_DB:
* Test if database exists
COUNT = 0
READ PO.RECORD FROM PO2F, '96440' THEN COUNT = COUNT + 1
READ PO.RECORD FROM PO2F, '96441' THEN COUNT = COUNT + 1
READ PO.RECORD FROM PO2F, '96442' THEN COUNT = COUNT + 1

XML.RESPONSE = XML.RESPONSE : XAM : '<records_found>' : COUNT : '</records_found>'
XML.RESPONSE = XML.RESPONSE : XAM : '</result>'

FINISH:
WRITE XML.RESPONSE ON XMLDATAF, 'LIST_PO2_RECORDS.XML'
ERR = ''
CALL PLW.PAGE('/XMLDATA/LIST_PO2_RECORDS.XML', '', ERR)

END
</pre>
